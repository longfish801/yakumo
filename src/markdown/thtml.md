# HTML化

[TOC levels=2-6]

## 概要

　yakumo記法から bltxt文書へ変換された後、HTML5へ変換するサンプルとして変換資材 thtmlが用意されています。
　各処理と変換資材との対応は以下のとおりです。

メタ要素（bltxt文書のmetaタグ）をHTMLに変換
: 変換資材thtml内のthtml.tpac上のクロージャパス /thtml.meta

平文（bltxt文書のtextタグ）をHTMLに変換
: 変換資材thtml内のhtmlize.tpac上のクロージャパス /thtml.htmlize/node#text

段落（bltxt文書のparaタグ）をHTMLに変換
: 変換資材thtml内のhtmlize.tpac上のクロージャパス /thtml.htmlize/node#para

ブロック要素（bltxt文書のparaタグ）をHTMLに変換
: 変換資材thtml内のhtmlize.tpac上のクロージャパス /thtml.htmlize/node#block

インライン要素（bltxt文書のparaタグ）をHTMLに変換
: 変換資材thtml内のhtmlize.tpac上のクロージャパス /thtml.htmlize/node#inline

## メタ要素

### タイトル

　タイトル、サブタイトルは、含意タグで指定します。
　省略可能です。

```
【＃タイトル】円周率について
【＃サブタイトル】著名な語呂合わせ
```

　以下のHTMLに変換します。
　タイトルの指定がないときはデフォルトで「（無題）」とします。

```
<h1>円周率について</h1>
<div id="subtitle">著名な語呂合わせ</div>
```

### 付帯情報

　付帯情報として公開日、著者名を含意タグで指定します。
　省略可能です。

```
【＃公開日】2022.02.03
【＃著者名】山田太郎
```

　以下のHTMLに変換します。

```
<li>公開日 2022.02.03</li>
<li>山田太郎</li>
```

### 目次

　見出しから目次を生成します。
　以下のbltxt文書があったとします。

```
【＝見出し】おいしいカレーの作り方
【＝見出し：2】材料の準備
【＝見出し：3】牛の飼い方
```

　以下のHTMLに変換します。

```
<li class="nav-item toc_h2"><a href="#id2_1" class="nav-link">おいしいカレーの作り方</a></li>
<li class="nav-item toc_h3"><a href="#id3_2" class="nav-link">材料の準備</a></li>
<li class="nav-item toc_h4"><a href="#id4_3" class="nav-link">牛の飼い方</a></li>
```

### 註記

　註は文中タグで、註記は含意範囲タグで記述します。
　一番目の属性に、紐付けのため共通する文字列を指定してください。
　以下のbltxt文書があったとします。

```
　XML【註：XML】をHTML【註：HTML】に変換します。

【＊註記：XML】
　eXtensible Markup Languageの略です。
【註記＊】
【＊註記：HTML】
　Hyper Text Markup Languageの略です。
【註記＊】
```

　以下のHTMLに変換します。

```
<dt><a name="t1" href="#f1">[*1]</a></dt>
<dd>　eXtensible Markup Languageの略です。</dd>
<dt><a name="t2" href="#f2">[*2]</a></dt>
<dd>　Hyper Text Markup Languageの略です。</dd>
```

### ナビゲーションリンク

　他のページへのナビゲーションリンクを生成します。

　補足情報になにも指定しない場合、以下のリンクを生成します。

* 変換結果キーの値が "index"の場合
    -  ".."へのリンクを生成します。
* 変換結果キーの値が "index"以外の場合
    -  "index.html"へのリンクを生成します。

　補足情報にキー orderで変換結果の HTMLファイル名（変換結果キー.html）のリストが指定されている場合、以下のリンクを生成します。

* 変換結果キーの値が "index"の場合
    -  ".."へのリンクを生成します。
* 変換結果キーの値が "index"以外の場合
    -  前のページ、次のページ、そして"index.html"へのリンクを生成します。

　たとえばキー orderに [ "some1.html", "some2.html", "some3.html" ]が指定されており、変換結果キーが "some2"のときには以下のリンクを出力します。

```
<a href="some1.html"><i class="bi bi-arrow-left-circle"></i></a>
<a href="index.html#toc"><i class="bi bi-arrow-up-circle"></i></a>
<a href="some3.html"><i class="bi bi-arrow-right-circle"></i></a>
```

## 平文

　HTML文法上の特殊文字をそのまま使うことができます。
　以下のbltxt文書があったとします。

```
　もし、あのとき"あれ"があったなら。
　極上の<カレー>になっていたかもしれない。
```

　以下のHTMLに変換します。特殊文字を実体参照に置き換えます。

```
<p>　もし、あのとき&quot;あれ&quot;があったなら。<br/>
　極上の&lt;カレー&gt;になっていたかもしれない。</p>
```

## 段落

　bltxt文書の性質上、連続する行をひとつの段落とみなします。
　空行が段落区切りとなります。空行が複数あってもひとつの空行と同じ扱いになります。
　以下のbltxt文書があったとします。

```
　おいしいカレーを作るには隠し味が大切です。
　隠し味にもいろいろなものがあります。


　一般家庭で良く使われる隠し味を試してみましょう。
```

　以下のHTMLに変換します。
　改行は brタグを挿入します。段落は pタグで囲みます。

```
<p>　おいしいカレーを作るには隠し味が大切です。<br/>
　隠し味にもいろいろなものがあります。</p>

<p>　一般家庭で良く使われる隠し味を試してみましょう。</p>
```

　以下の行範囲タグ内では brタグのみ挿入（pタグなし）します。

* 見出し
* （箇条書きの）項目
* （用語説明の）用語
* （用語説明の）説明
* 画像
* （引用の）引用元

　以下の行範囲タグ内では改行コードのみ（brタグ、pタグなし）です。

* コード
* 変換済

　上記以外では brタグ、pタグを挿入します。

## ブロック要素
### 見出し

　行タグで見出しを表現できます。

```
【＝見出し】おいしいカレーの作り方
【＝見出し：2】材料の準備
【＝見出し：3】牛の飼い方
```

　以下のHTMLに変換します。
　タイトルを h1とする関係上、レベル1が h2、レベル2が h3……となります。
　目次からページ内リンクで移動できるよう、aタグを挿入します。
　name属性は、bltxt文書を XML化したときの snum属性を利用します。

```
<h2><a name="1">おいしいカレーの作り方</a></h2>
<h3><a name="2">材料の準備</a></h3>
<h4><a name="3">牛の飼い方</a></h4>
```

### 箇条書き

　行範囲タグで箇条書きを表現できます。

```
【－箇条書き】
【－項目】
じゃがいも
【項目－】
【－項目】
ニンジン
【項目－】
【－項目】
玉ねぎ
【－箇条書き】
【－項目】
刻むときは注意。
涙がでます。
【項目－】
【箇条書き－】
【項目－】
【－項目】
カレー粉
【－箇条書き】
【－項目】
ジャワカレー
【項目－】
【－項目】
バーモンドカレー
【項目－】
【箇条書き－】
【項目－】
【箇条書き－】
```

　以下のHTMLに変換します。

```
<ul>
<li>じゃがいも</li>
<li>ニンジン</li>
<li>玉ねぎ
	<ul>
	<li>刻むときは注意。<br/>
	涙がでます。</li>
	</ul></li>
<li>カレー粉
	<ul>
	<li>ジャワカレー</li>
	<li>バーモンドカレー</li>
	</ul></li>
</ul>
```

### 用語説明

　行範囲タグ、行タグで用語説明を表現できます。

```
【－用語説明】
【＝用語】甘口
【＝説明】いちばん辛みが穏やか。子供向け。
【＝用語】中辛
【＝説明】中くらいの辛さ。一般的。
【＝用語】大辛
【＝説明】とても辛い。マニアック。
【用語説明－】
```

　以下のHTMLに変換します。

```
<dl>
<dt>甘口</dt>
<dd>いちばん辛みが穏やか。子供向け。</dd>
<dt>中辛</dt>
<dd>中くらいの辛さ。一般的。</dd>
<dt>大辛</dt>
<dd>とても辛い。マニアック。</dd>
</dl>
```

### 画像

　行タグで画像を表現できます。
　属性に画像の説明、画像ファイルへのパスを指定してください。

```
【＝画像：猫ちゃん：cutecat.png】
```

　画像にキャプションを付与することもできます。

```
【＝画像：猫ちゃん：cutecat.png】猫ちゃん、可愛い～
```

　以下のHTMLに変換します。

```
<figure class="text-center">
<a href="cutecat.png"><img src="cutecat.png" class="img-fluid" alt="猫ちゃん"></a>
<figcaption>猫ちゃん、可愛い～</figcaption>
</figure>
```

### コラム

　行範囲タグでコラムを表現できます。

```
【－コラム】
　日本人の四割は血液型がＯ型です。
【コラム－】
```

　以下のHTMLに変換します。
　asideタグ（class属性値は"column"）を生成します。

```
<aside class="panel panel-primary">
<p>　日本人の四割は血液型がＯ型です。</p>
</aside>
```

　第一属性に小見出しを指定することもできます。

```
【－コラム：８月３１日はなんの日？】
　８月３１日は野菜の日です。
　野菜を食べましょう。
【コラム－】
```

　以下のHTMLに変換します。

```
<aside class="alert alert-success" role="alert">
<header class="alert-heading"><i class="bi bi-info-circle-fill"></i> ８月３１日はなんの日？</header>
<p>　８月３１日は野菜の日です。<br/>
　野菜を食べましょう。</p>
</aside>
```

### 注意

　行範囲タグで注意喚起のためのコラムを表現できます。
　第一属性に小見出しを指定することもできます。

```
【－注意：中火とは】
　中火とは、フライパンの底に炎の先端がちょうど届くくらいの状態を指します。
【注意－】
```

　以下のHTMLに変換します。
　asideタグ（class属性値は"attention"）を生成します。

```
<aside class="alert alert-danger" role="alert">
<header class="alert-heading"><i class="bi bi-exclamation-triangle-fill"></i> 中火とは</header>
<p>　中火とは、フライパンの底に炎の先端がちょうど届くくらいの状態を指します。</p>
</aside>
```

### 引用、引用元

　行範囲タグで引用を表現できます。
　必要に応じて行タグで引用元を記述できます。

```
【－引用】
　山路を登りながら、こう考えた。
　智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。
【＝引用元】夏目漱石『草枕』
【引用－】
```

　以下のHTMLに変換します。

```
<blockquote>
<p>　山路を登りながら、こう考えた。<br/>
　智に働けば角が立つ。情に棹させば流される。意地を通せば窮屈だ。とかくに人の世は住みにくい。</p>
<footer><cite>夏目漱石『草枕』</cite></footer>
</blockquote>
```

### コード

　行範囲タグでコードを表現できます。

```
【－コード】
println "Hello, World!";
println "This is sample code of how to hello to all of the world, which is executed " + Date().format("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
【コード－】
```

　以下のHTMLに変換します。
　preタグを生成します。

```
<pre>
println &quot;Hello, World!&quot;;
println &quot;This is sample code of how to hello to all of the world, which is executed &quot; + Date().format(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSZ&quot;);
</pre>
```

### 変換済

　yakumo記法が対応していない変換対象について、変換後の内容を記述します。
　属性には形式名を記述してください。HTMLならば "html"です。

```
【－変換済：html】
<table>
<tr><th>好きなおかず</th><th>好きなごはん</th></tr>
<tr><td>カレー</td><td>ライス</td></tr>
</table>
【変換済－】
```

　以下のように、なにも加工せずにそのまま出力します。
　なお、形式が一致しない場合はなにも出力しません。

```
<table>
<tr><th>好きなおかず</th><th>好きなごはん</th></tr>
<tr><td>カレー</td><td>ライス</td></tr>
</table>
```

### 行範囲

　特殊な表示をしたい行の範囲を表します。
　属性には範囲の種類を指定してください。

```
【－行範囲：big】
　宵越しのカレーは美味しい。
【行範囲－】
```

　以下のHTMLに変換します。
　スタイルシートと組み合わせることで期待する表示ができます。
　class属性の値には属性に指定した値が使われます。

```
<div class="big">
<p>　宵越しのカレーは美味しい。</p>
</div>
```

## インライン要素
### 註

　註は文中タグで記述してください。
　一番目の属性に、紐付けのため共通する文字列を指定してください。
　註に対する註記の書き方については [註記](#註記) を参照してください。

```
　XML【註：XML】をHTML【註：HTML】に変換します。
```

　以下のHTMLに変換します。

```
<p>　XML<sup><a id="f1" href="#t1">*1</a></sup>をHTML<sup><a id="f2" href="#t2">*2</a></sup>に変換します。</p>
```

### リンク

　以下のbltxt文書があったとします。

```
　詳しくは【｜リンク：https://www.google.com/】ネット検索【リンク｜】してください。
　【｜リンク：https://www.google.com/】https://www.google.com/【リンク｜】でネット検索できます。
```

　以下のHTMLに変換します。

```
<p>　詳しくは<a href="https://www.google.com/">ネット検索</a>してください。<br/>
　<a href="https://www.google.com/">https://www.google.com/</a>でネット検索できます。</p>
```

### 注目

　以下のbltxt文書があったとします。

```
　危ない！ それは【｜注目】自爆スイッチ【注目｜】だ！
```

　以下のHTMLに変換します。
　ブラウザでの表示は .attentionセレクタの定義に依存します。

```
<p>　危ない！ それは<span class="attention">自爆スイッチ</span>だ！</p>
```

### 重要

　以下のbltxt文書があったとします。

```
　間違えて【｜重要】自爆スイッチ【重要｜】を押さないでください。
```

　以下のHTMLに変換します。
　一般的なブラウザでは太字で表示されます。

```
<p>　間違えて<strong>自爆スイッチ</strong>を押さないでください。</p>
```

### 補足

　以下のbltxt文書があったとします。

```
　もちろん本当【｜補足】かもしれない【補足｜】ですよ。
```

　以下のHTMLに変換します。
　一般的なブラウザでは小さめの文字で表示されます。

```
<p>　もちろん本当<small>かもしれない</small>ですよ。</p>
```

### 特記

　以下のbltxt文書があったとします。

```
　まあ、真実は【｜特記】in the bush【特記｜】ですが。
```

　以下のHTMLに変換します。
　一般的なブラウザでは斜体で表示されます。

```
<p>　まあ、真実は<i>in the bush</i>ですが。</p>
```

### 訂正

　以下のbltxt文書があったとします。

```
　富士山の標高は【｜訂正】３７７７メートル【訂正｜】３７７６メートルです。
```

　以下のHTMLに変換します。
　一般的なブラウザでは打消し線で表示されます。

```
<p>　富士山の標高は<s>３７７７メートル</s>３７７６メートルです。</p>
```

### 上付き

　以下のbltxt文書があったとします。

```
　まあね、大人【｜上付き】2【上付き｜】があるんですよ。
```

　以下のHTMLに変換します。
　一般的なブラウザでは上付き文字で表示されます。

```
<p>　まあね、大人<sup>2</sup>があるんですよ。</p>
```

### 下付き

　以下のbltxt文書があったとします。

```
　人生にはH【｜下付き】2【下付き｜】Oが不可欠だ。
```

　以下のHTMLに変換します。
　一般的なブラウザでは下付き文字で表示されます。

```
<p>　人生にはH<sub>2</sub>Oが不可欠だ。</p>
```

### 縦中横

　以下のbltxt文書があったとします。

```
　シェイクスピア全集の第【｜縦中横】10【縦中横｜】巻に記述されています。
```

　HTML5は縦書きや縦中横には対応していないため、HTMLタグへの変換はしません。

```
<p>　シェイクスピア全集の第10巻に記述されています。</p>
```

### 傍点

　以下のbltxt文書があったとします。

```
　まだ【｜傍点】午前三時【傍点｜】じゃないか。
```

　以下のHTMLに変換します。
　ブラウザでの表示は .dotセレクタの定義に依存します。

```
<p>　まだ<span class="dot">午前三時</span>じゃないか。</p>
```

### ルビ

　以下のbltxt文書があったとします。

```
　【｜ルビ：すいとう】出納【ルビ｜】係は言った。
```

　以下のHTMLに変換します。
　一般的なブラウザではルビとして表示されます。

```
<p>　<ruby>出納<rp>［</rp><rt>すいとう</rt><rp>］</rp></ruby>係は言った。</p>
```

### 範囲

　行内で特殊な表示をしたい範囲を表します。
　属性には範囲の種類を指定してください。

```
　今夜は【｜範囲：small】チキンカレー【範囲｜】よ。
```

　以下のHTMLに変換します。
　スタイルシートと組み合わせることで期待する表示ができます。
　属性に指定した値は class属性に使われます。

```
<p>　今夜は<span class="small">チキンカレー</span>よ。</p>
```
